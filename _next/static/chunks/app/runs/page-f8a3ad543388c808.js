(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{823:(e,t,s)=>{Promise.resolve().then(s.bind(s,9210))},960:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(5125);let a="https://growdiaries-api.railway.app",n=r.A.create({baseURL:a,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{var t;let s=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!s._retry){s._retry=!0;try{let e=localStorage.getItem("refreshToken");if(e){let{accessToken:t}=(await r.A.post("".concat(a,"/auth/refresh"),{refreshToken:e})).data;return localStorage.setItem("accessToken",t),s.headers.Authorization="Bearer ".concat(t),n(s)}}catch(e){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/auth/login"}}return Promise.reject(e)});let l=n},9210:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(5155),a=s(2115),n=s(2619),l=s.n(n),i=s(960);function c(){let[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!0),[c,o]=(0,a.useState)(1),[d,u]=(0,a.useState)(1);(0,a.useEffect)(()=>{x()},[c]);let x=async()=>{try{n(!0);let e=await i.A.get("/runs",{params:{page:c,limit:12}});t(e.data.runs),u(e.data.pagination.totalPages)}catch(e){console.error("Failed to fetch runs:",e)}finally{n(!1)}};return s&&1===c?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)("div",{className:"text-center",children:"Loading..."})}):(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold",children:"Explore Grow Diaries"}),(0,r.jsx)(l(),{href:"/runs/new",className:"btn-primary",children:"+ New Diary"})]}),(0,r.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{var t,s,a,n;return(0,r.jsx)(l(),{href:"/runs/".concat(e.id),children:(0,r.jsxs)("div",{className:"card hover:shadow-xl transition-shadow cursor-pointer h-full",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold line-clamp-2",children:e.title}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(function(e){switch(e){case"SEEDLING":return"bg-yellow-200 text-yellow-800";case"VEGETATIVE":return"bg-green-200 text-green-800";case"FLOWERING":return"bg-purple-200 text-purple-800";case"DRYING":return"bg-orange-200 text-orange-800";case"CURING":return"bg-blue-200 text-blue-800";default:return"bg-gray-200 text-gray-800"}}(e.phase)),children:e.phase})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:[(0,r.jsx)("strong",{children:"Strain:"})," ",e.strainName]}),e.strainType&&(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.strainType})]}),e.description&&(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4 line-clamp-3",children:e.description}),(0,r.jsx)("div",{className:"mt-auto pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsxs)("span",{children:["\uD83D\uDC64 ",(null==(t=e.user)?void 0:t.username)||"Unknown"]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)("span",{children:["❤️ ",(null==(s=e._count)?void 0:s.likes)||0]}),(0,r.jsxs)("span",{children:["\uD83D\uDCAC ",(null==(a=e._count)?void 0:a.comments)||0]}),(0,r.jsxs)("span",{children:["\uD83D\uDCDD ",(null==(n=e._count)?void 0:n.entries)||0]})]})]})})]})},e.id)})}),d>1&&(0,r.jsxs)("div",{className:"flex justify-center gap-2 mt-8",children:[(0,r.jsx)("button",{onClick:()=>o(Math.max(1,c-1)),disabled:1===c,className:"btn-secondary disabled:opacity-50",children:"Previous"}),(0,r.jsxs)("span",{className:"px-4 py-2",children:["Page ",c," of ",d]}),(0,r.jsx)("button",{onClick:()=>o(Math.min(d,c+1)),disabled:c===d,className:"btn-secondary disabled:opacity-50",children:"Next"})]})]})}}},e=>{e.O(0,[619,125,441,255,358],()=>e(e.s=823)),_N_E=e.O()}]);