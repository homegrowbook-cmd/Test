(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{960:(e,r,s)=>{"use strict";s.d(r,{A:()=>o});var t=s(5125);let a="https://growdiaries-api.railway.app",n=t.A.create({baseURL:a,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let r=localStorage.getItem("accessToken");return r&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{var r;let s=e.config;if((null==(r=e.response)?void 0:r.status)===401&&!s._retry){s._retry=!0;try{let e=localStorage.getItem("refreshToken");if(e){let{accessToken:r}=(await t.A.post("".concat(a,"/auth/refresh"),{refreshToken:e})).data;return localStorage.setItem("accessToken",r),s.headers.Authorization="Bearer ".concat(r),n(s)}}catch(e){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/auth/login"}}return Promise.reject(e)});let o=n},3361:(e,r,s)=>{"use strict";s.d(r,{n:()=>o});var t=s(5988),a=s(9863),n=s(960);let o=(0,t.vt)()((0,a.Zr)(e=>({user:null,accessToken:null,refreshToken:null,login:async(r,s)=>{let{user:t,accessToken:a,refreshToken:o}=(await n.A.post("/auth/login",{emailOrUsername:r,password:s})).data;localStorage.setItem("accessToken",a),localStorage.setItem("refreshToken",o),e({user:t,accessToken:a,refreshToken:o})},register:async(e,r,s)=>{await n.A.post("/auth/register",{email:e,username:r,password:s})},logout:()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),e({user:null,accessToken:null,refreshToken:null})},setUser:r=>{e({user:r})}}),{name:"auth-storage",partialize:e=>({user:e.user})}))},3673:()=>{},5273:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,3673,23)),Promise.resolve().then(s.bind(s,9379))},9379:(e,r,s)=>{"use strict";s.d(r,{default:()=>l});var t=s(5155),a=s(2619),n=s.n(a),o=s(2115),i=s(3361);function l(){let[e,r]=(0,o.useState)(!1),{user:s,logout:a}=(0,i.n)();return(0,t.jsx)("nav",{className:"bg-white dark:bg-gray-800 shadow-lg",children:(0,t.jsxs)("div",{className:"container mx-auto px-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsx)(n(),{href:"/",className:"text-2xl font-bold text-primary-600",children:"\uD83C\uDF3F GrowDiaries"}),(0,t.jsxs)("div",{className:"hidden md:flex items-center space-x-6",children:[(0,t.jsx)(n(),{href:"/runs",className:"hover:text-primary-600 transition-colors",children:"Explore"}),(0,t.jsx)(n(),{href:"/runs/trending",className:"hover:text-primary-600 transition-colors",children:"Trending"}),s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n(),{href:"/runs/new",className:"hover:text-primary-600 transition-colors",children:"New Diary"}),(0,t.jsx)(n(),{href:"/users/".concat(s.username),className:"hover:text-primary-600 transition-colors",children:"Profile"}),(0,t.jsx)("button",{onClick:a,className:"btn-secondary",children:"Logout"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n(),{href:"/auth/login",className:"hover:text-primary-600 transition-colors",children:"Login"}),(0,t.jsx)(n(),{href:"/auth/register",className:"btn-primary",children:"Sign Up"})]})]}),(0,t.jsx)("button",{onClick:()=>r(!e),className:"md:hidden p-2",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),e&&(0,t.jsx)("div",{className:"md:hidden pb-4",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,t.jsx)(n(),{href:"/runs",className:"hover:text-primary-600 transition-colors",children:"Explore"}),(0,t.jsx)(n(),{href:"/runs/trending",className:"hover:text-primary-600 transition-colors",children:"Trending"}),s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n(),{href:"/runs/new",className:"hover:text-primary-600 transition-colors",children:"New Diary"}),(0,t.jsx)(n(),{href:"/users/".concat(s.username),className:"hover:text-primary-600 transition-colors",children:"Profile"}),(0,t.jsx)("button",{onClick:a,className:"btn-secondary text-left",children:"Logout"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n(),{href:"/auth/login",className:"hover:text-primary-600 transition-colors",children:"Login"}),(0,t.jsx)(n(),{href:"/auth/register",className:"btn-primary text-center",children:"Sign Up"})]})]})})]})})}}},e=>{e.O(0,[978,619,125,214,441,255,358],()=>e(e.s=5273)),_N_E=e.O()}]);